# 04. 아마존 EC2
### 아마존 EC2 장점
- 빠른 시장출시 속도 (Time to Market)
- 확장성 (Scalability)  : 워크로드에 따라 Scale Up / Down
- 통제성 (Control) : 언제든 시작 및 중지 가능
- 신뢰성 (Reliable) : 기존 서버에 문제가 생겼을 때 신속하게 예측 가능한 방식으로 교체 서버 추가 가능
- 보안성 (Scure)
- 통합 : S3, VPC, Lambda 등 다양한 서비스와 통합
- 다양한 인스턴스 타입
- 비용효율성

### 아마존 EC2 인스턴스 타입 및 특징
- 범용 / 컴퓨팅 최적화 / 메모리 최적화 / 스토리지 최적화 / 고성능 컴퓨팅

- 범용 인스턴스 (T2, M5, M4, M3)
	- 일반적인 목적으로 설계도니 다수의 어플리케이션에 적용할 수 있도록 컴퓨팅 파워 와 메모리, 네트워크 등 리소스의 균형을 맞춘 인스턴스 타입
	- T2는 평균 수준의 CPU 파워를 기본으로 처리량 급증 시 성능가속 기능을 추가한 인스턴스 타입
- 컴퓨팅 최적화 인스턴스 (C5, C4, C3)
	- 고도의 컴퓨팅 파워가 요구되는 워크로드를 처리하기 위한 타입
	- 미디어 변환, 다수의 동시 접속자가 사용되는 어플리케이션 지원. 장기간 실행되는 배치 프로세싱, 고성능 컴퓨팅, 게임서버 등의 임무 수행
- 메모리 최적화 인스턴스 (X1e, x1, R4, R3)
	- 고성능 메모리가 요구되는 워크로드 처리
	- 메모리에서 막대한 양의 데이터를 처리하는 어플리케이션에 적합
	- DB, BigData 수집 분석등의 용도로 사용
- 스토리지 최적화 인스턴스 (H1, I3, D2)
	- 대규모 데이터 세트를 순차적으로 읽기, 쓰기 방식으로 접근하는 워크로드 처리
	- 매우 낮은 전송지연 및 랜던 IOPS 수준
	- 인메모리 DB의 맵리듀스, Hadoop 분석캐시등의 목적으로 사용
- 고성능 컴퓨팅 인스턴스 (P3, P2, G3, F1)
	- 머신러닝, 세포 모델링, 유전공학, 유체역학, 금융 공학등 컴퓨팅 파워가 요구되는 워크로드를 처리하기 위한 인스턴스 타입
	- 높은 비용을 지불할수록 더 높은 수준의 컴퓨팅 파워 활용 가능
	- 병렬처리 및 고도의 처리성능을 제공하기 위한 GPU, FPGA 등 하드웨어 기반 가속기 지원

### EC2 인스턴스의 주요 특징 - 프로세서 특징
- EC2 인스턴스는 인텔프로세서를 사용하므로 인텔이 제공하는 프로세서의 특징적인 기능들을 사용할 수 있다.
- 인텔 AES의 신규기능 (AES-NI)
	- AES(Advanced Encryption Standard) 알고리즘에 적용된 신규 암호화
	- 신속한 데이터 보호 기능 및 향상된 보안 성능 제공
- 인텔 고급 벡터 확장 기능 (AVX)
	- 인텔 AVX는 이미지 및 오디오/비디오 프로세싱 어플리케이션의 성능을 높여준다.
- 인텔 터보 부스트 기술
	- 워크로드 및 트래픽 급증 등 필요시에 즉각적으로 성능을 높일 수 있도록 해준다.

### EC2 인스턴스의 주요 특징 - 네트워크 특징
- EC2-Classic은 아마존 EC2의 오리지널 배포판 : 다른 사용자와 공유하는 하나의 단일 계층 네트워크에서 인스턴스 실행 가능
- 신규 인스턴스는 EC2-Classic을 사용할 수 없다. : VPC로만 론칭, 아마존 VPC는 EC2-Classic에는 없는 다양한 네트워크 기능 제공

### EC2 인스턴스의 특징 - 스토리지 특징
- EC2에 부착하여 사용하는 블록스토리지 - EBS (Elastic Block Storage)
- EBS는 EC2인스턴스와 독립적인 생명주기를 가진다.
- 볼륨 타입
	- 범용스토리지 SSD(Solid State Drive)
		- 기업의 일반적인 목적에 적합. 아마존의 모든 EC2인스턴스에서 기본설정으로 사용
	- 프로비전 IOPS (PIOPS)
		- 데이터베이스 워크로드 실행 중 대량의 I/O 작업 컴퓨팅
	- 마그네틱 스토리지
		- 다른 볼륨타입에 비해 가장 저렴
		- 중요성이 다소 낮은 워크로드. 데이터 접근이 잦은 여타 워크로드 처리에 적합

### 아마존 EC2 가격 정책
- 온디맨드 인스턴스 : 사용하는 인스턴스 사용 시간에 따라 지불
- 예약 인스턴스 
	- 온디맨드 인스턴스에 비해 최대 75% 요금 할인
	- 사용량이 거의 확정된 프로덕션 워크로드용 인스턴스에 적합
	- 1년 또는 3년 약정
- 스팟 인스턴스
	- 일시적으로 여유가 생긴 컴퓨팅 자원을 사용자에게 경매 입찰 방식으로 제공
	- 온디맨드 대비 최대 90% 할인된 금액으로 사용

### 공유 테넌시 : EC2 인스턴스를 론칭하면 기본적으로 적용되는 가상화 조건
### 전용 호스트 : 특정 사용자에게만 배타적으로 할당된 물리적 서버
### 전용 인스턴스 : 단일 테넌스 하드웨어에서 EC2 인스턴스를 실행

## 인스턴스와 AMI
- AMI : Amazon Machine Image
	- 루트 볼륨에 포함
	- 루트 볼륨에는 OS와 어플리케이션 서버등 소프트웨어가 포함되어 있다.
- 인스턴스 루트 볼륨 (Instance Root Volume)
	- 모든 루트 디바이스는 S3로부터 론칭에 필요한 정보를 가져온다.
		- 인스턴스 스토어 기반 AMI : S3를 통해 백업되는 인스턴스 루트 디바이스
	- 인스턴스 부팅시 루트 볼륨에 복사
	- 인스턴스 삭제시 모든 데이터 삭제
	- 인스턴스 스토어 기반의 인스턴스는 중지가 지원되지 않는다.
	- 데이터의 휘발성 때문에 정기적으로 지속형 스토리지 저장 필요
- EBS 볼륨 기반 AMI : 인스턴스 스토어 기반 AMI와 반대의 특징

### AMI에서의 가상화
HVM AIM : 하드웨어 가상화
PV AMI : 부분가상화. PV-GRUB(부트로더)에서 부팅

## 시큐리티 그룹
- 기본적으로 시큐리티 그룹은 모든 아웃바운드 트래픽 허용
- EC2-Classic의 시큐리티 그룹에 있는 아웃바운드 규칙은 변경할 수 없다.
- 허용 여부만 결정 가능
- 스테이트 풀 속성을 지닌다.


