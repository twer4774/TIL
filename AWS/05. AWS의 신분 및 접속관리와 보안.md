# 05. AWS의 신분 및 접속관리와 보안
IAM ( Identity and Access Management)
AWS 리소스에 대한 신분 인증 및 권한 부여

## 신분 인증
- 유저 및 접근 권한 고나리 - 액세스 키, 패스워드, 멀티팩터 인증 등 보안 수단관리
- 그룹화된 유저 및 접근 권한 관리 - federated user(그룹화된 유저) 관리
- 신분 인증 및 보안 정보 교환을 위해 SAML 방식 이용
	- SAML : 보안 추가 마크업 언어
### 권한 부여 - IAM 정책
- 액세스 키 : CLI, API , SDK 활용시 주로 사용
- 키페어 : 아마존 EC2 서버 로그인 시 사용
- 멀티팩터 인증 : 루트 계정 로그인 시 추가 보안 인증 수단으로 활용
### 유저 - Username / PW
- 루트 계정
	- 루트계정에서 유저 생성 -> 유저에 어드민 권한 부여
	- 루트 계정은 시스템의 모든 권한을 가지고 있다.
	- 처음 계정에 대한 설정 이후 루트 계정은 사용하지 않는 것이 좋다.
	- 프로그래밍 기법으로 리소스에 대한 요청 관리 : 개인별 액세스 키 제공
		- 액세스 키를 분실한 경우 삭제 후 재발급
IAM을 통한 유저 생성 방법
1. IAM에서 유저 생성
2. 유저에 보안 자격 증명 부여
3. 유저에 접근 승인, 역할 (롤) 책임 부여
4. 유저를 하나 이상의 그룹에 추가
### 그룹
- 비슷한 권한과 책임의 묶음
- 유저 단위로만 추가 가능 (그룹 단위로 추가 불가)
- 관리자는 20여가지의 역할과 권한을 부여한 그룹을 먼저 생성 후 기존의 개발자를 그룹에 추가한다.

## IAM 활용 베스트 프랙틱스
- IAM 유저 활용 : AWS 루트 유저는 프로그래밍 기법의 호출 또는 요청을 위해 결코 사용하지 않아야 한다.
- 강력한 패스워드 정책 수립 : 90일이 지난 패스워드 폐기
	- 최소 하나의 대문자, 소문자, 기호문자, 숫자가 포함되도록 하고 최소 8자에서 10자 이상이 되도록 한다.
- 정기적으로 보안자격 정보 갱신
	- Access Key Last Used 기능을 이용해 90일 이상 사용되지 않은 보안 자격 정보를 찾고 -> 비활성화 -> IAM 유저의 보안 자격은 순회 갱신한다.
- MFA 활용, 최소한의 권한 부여, 그룹 승인 관리, IAM 롤 활용
- 아마존 EC2 인스턴스를 위한 IAM 롤 활용
	- 아마존 EC2 인스턴스에서 실행되는 어플리케이션이 있고, 이 어플리케이션이 다른 AWS 서비스에 접근해야하는 경우, 보안 자격 정보 제공
- 보안 강화를 위한 IAM 정책 조건 수립
	- 정책 조건을 이용하여 접근권한의 세부규칙 추가
	- 특정 IP주소로부터 지정한 리소스에 특정 날짜, 특정시간에만 접근 가능하게 할 수 있다.
- AWS CloudTrail 활용
	- 로그파일검증 기능 활성화
	- 아마존 S3 버킷에 저장된다.

## AWS 보안 규정 프로그램 : Compilance Program
- 고객으로 하여금 AWS 클라우드 내에서 보안 유지 및 데이터 보호가 어떻게 이루어지는지 잘 이해하도록 해준다.

## AWS 공유책임 모델
- AWS는 크라우드 환경을 구성하는 인프라에 대한 보안 책임
- 기업은 클라우드에 연결된 것들에 대한 보안 책임
### 보안에 대한 AWS의 책임
- 데이터 센터에 대한 물리적 보안
	- 무정전 전원장치(UPS)보유
	- AWS 데이터센터 내부는 작업자의 업뭉에 따라 접근 가능 구역이 세분화되어 있다.
- 아마존 EC2 보안 : 루트 유저를 위한 운영체제 호스팅에 대한 보안 책임 - 멀티팩터
- 네트워크 보안
	- AWS의 네트워크 디바이스는 중복구현 원칙에 따라 설계된다.
	- AACL를 통해 트래픽 흐름 관리 및 통제
	- OS 호스팅 레벨에서의 IP스푸핑 금지
		- IP 스푸핑 : 해커가 이용자를 속일 목적으로 만든 웹사이트를 통해 이용자의 정보를 빼가는 해킹 기술
	- 패킷 스냅핑은 하이퍼바이저 레벨에서 차단하므로 효과가 없다.
		- 패킷 스냅핑 : 네트워크에서 다른 이용자의 패킷을 염탐하는 네트워크 도청행위이자 해킹수법
	- 비인가 포트 스캐닝은 TOS 위반으로서 감지 및 차단 대상이다.
- 환경설정 관리 : 모든 변경사항의 인증, 로그, 테스트, 승인, 문서화 업무 관리
- 고가용성 데이터 센터
	- 모든 AZ가 항상 가동 상태를 유지해야하 하고, 고객에게 언제든지 서비스를 제공할 수 있어야 한다.
	- 모든 AZ는 중복구현 컨셉으로 설계된다.
- 디스크 관리 : 다른 사용자의 디스크 공간 또는 데이터 영역은 볼 수 없도록 관리
- 스토리지 디바이스 폐기 : 스토리지 디바이스가 수명연한에 도달하면 가이드에 따라 모든 데이터를 삭제하고 자기장을 투시해 기록 장치로서의 성능제거 후 폐기
### 보안에 대한 고객측의 책임
- 운영체제 : 게스트 OS의 관리에 대한 책임 부담. OS의 정기적인 패치 및 보안 업데이트 책임
- 어플리케이션 : 데이터 암호화, 사용자 권한권리, 보안 및 규정 준수
- 방화벽 : OS레벨에 적절한 방화벽을 적용하고 NACL을 이용해 네트워크 레벨에서 보안을 위한 환경을 설정해야 한다.
- 네트워크 환경설정 : VPC는 클라우드에서 개별 기업만을 위한 데이터 센터를 운영할 수 있게 해주지만, VPC에 대한 보안은 고객이 책임진다.
- 서비스 환경설정 : 고객은 서븟 환경설정 측면에서 자신의 서버에 누가, 어떤 SW를 설치했는지 알고 있어야하며, 인프라 변경사항을 확인해야 한다.
- 자격 인증 및 계정 관리


