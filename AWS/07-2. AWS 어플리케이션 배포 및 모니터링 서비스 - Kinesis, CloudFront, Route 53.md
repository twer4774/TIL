# 07-2. AWS 어플리케이션 배포 및 모니터링 서비스 - Kinesis, CloudFront, Route 53
## Amazon Kinesis
- Kinesis 패밀리 : Data Streams, Data Firehose, Data Analytics
### Kinesis Data Streams
- 테라 바이트 급 데이터 저장 및 처리
- KCL(Kinesis Client Library)은 스트리밍 데이터를 이용해 실시간 대시보드, 실시간 경고, 동적 가격 정책 및 광고 집행 기능 수행
- Kinesis Data Streams로 실시간 데이터를 수집하고, S3, RedShift, EMR, Lambda 등 서비스로 전송 가능
- 장점
	- 실시간성
	- 안정성 : VPC 엔드포인트로 API 접속, KMS의 마스터키 이용
	- 편리성
		- KPL(Kinesis Producer Library) 이용으로 스트림 데이터 입력
		- KCL(Kinesis Client Library) 이용으로 실시간 데이터 처리
	- 병렬처리 : 다수의 Kinesis 어플리케이션으로 동일 스트림 동시 처리
		- ex) 하나는 데이터처리, 하나는 S3 전송
	- 탄력성 : 처리 성능을 시간 당 수메가바이트에서 수테라 바이트로 올릴 수 있다.
	- 저비용 : 초기 설치비 및 고정비 없음
	- 신뢰성 : AWS 리전 내 세개의 시설에 스트리밍 데이터를 동기적으로 복제해 7일간 보존한다.
### Kinesis Data Firehose
- 데이터 저장소와 분석도구에 스트리밍 데이터를 로딩하기 위한 간단한 방법 제공
- 장점
	- 사용 편리성 : Kinesis Data Firhose에서 스트리밍 데이터 수집 -> Firehose 전송 스트림 생성 -> 전송 대상 선택 (S3, RedShift, Elastic Beanstalk) -> 스케일링, 샤딩, 모니터링 등 데이터 로딩 업무를 자동 처리
	- AWS 데이터 저장 서비스와의 통합
	- 서버리스 데이터 변환 : 대상 데이터 스토어 (S3, RedShift, ES)가 요구하는 포맷 변경
	- 근실시간 : 60여초 이내에 로딩
	- 지속적 관리 필요 없음
	- 사용량에 따른 과금
### Kinesis Data Analytics
- 데이터 처리 및 분석
- 표준 SQL 방식 이용
- 장점
	- 강력한 실시간 처리 성능 : 1초 미만의 처리 지연 성능 제공
	- 완전 관리형
	- 자동화된 탄력성 : 스케일 업/다운
	- 사용자 편의성 : 구조화 및 비구조화 스트리밍 분석을 위한 스킴에디터, SQL 에디터, SQL 템플릿 등 상호작용성 높은 분석도구 제공
	- 표준 SQL 제공
	- 사용량에 따른 과금

## Amazon CloudFront
- 글로벌 CDN(Content Delivery Network) 서비스
- 저지연성과 고속 전송 속성을 지닌 콘텐츠 배포 기능 제공
- 콘텐츠 사용자와 가까운 지역에 네트워크망 구축 -> 지역별 엣지 캐싱
- 데이터 전송 비용만 부담
- AWS 리전과 CloudFront 엣지 로케이션 간 데이터 전송비용 부담이 없음
- 정적 콘텐츠 캐싱 : 사진, 동영상, 스타일 시트 등 정적 콘텐츠 전송 속도 증가
- 동적 콘텐츠 가속화 : 네트워크 최적화로 가속화
- DDoS 공격 대응 : 보안 레이어 3, 4, 7 보호
- 강화된 보안성 : SSL 기능 제공
- API 호출 가속화
- SW 배포
- 비디오 스트리밍 : 4K급 비디오 스트리밍 가능
### 핵심 개념
- 엣지로케이션 : 글로벌 데이터 센터, 주요 대도시에 위치한다.
- 지역별 엣지 캐시 : 오리진 웹 서버와 엣지 로케이션 사이에 위치해 사용자에게 직접 콘텐츠 전송
- 배포 : 원본 파일 위치를 나타내는 CloudFront 경로
- 오리진 : S3, HTTP 서버, ELB 등으로 오리진 접근
- 제어 동작 : CDN 관련 정책 적용, 요청 타입 반응 변경, 캐싱
	- 경로 패턴 매칭 : URL Path로 캐시 동작 제어
	- 헤더 : 헤더 값에 디바이스 정보등을 넣어 다른 동작, 프로토콜에 따른 동작
		- 프로토콜 연결 타입이 다른 경우 해상도를 낮춰 제공
	- 쿼리 문자열 및 쿠키
	- 서명 URL 및 서명 쿠키
	- 프로토콜 정책
	- 유지시간
	- gzip 압축
### 지역 제한 기능
- Cloud Front는 사용자의 위치에 상관없이 콘텐츠를 전송한다.
- 특정 국가의 콘텐츠 요청을 거부하려면 지역 제한 기능을 이용한다.
	- 화이트 리스트 (접속허용 국가 목록) 기반으로 요청 받은 콘텐츠에 대한 접근 허용
	- 블랙 리스트 (접속금지 국가 목록) 기반으로 요청받은 콘텐츠에 대한 접근 거절

## Amazon Route 53
- DNS 서비스. 고가용성, 고확장성 서비스로서 100% SLA 보장 유일 서비스
- 지원하는 DNS 기록 타입
	- A (주소기록)
	- AAA(IPv6 주소기록)
	- CNAME (캐노니컬 네임기록)
	- CAA (인증권한 증명)
	- MX (메일교환기록)
	- NAPTR (네임권한 포인터 기록)
	- NS (네임서버 기록)
	- PTR (포인터 기록)
	- SOA (권한 시작 기록)
	- SPF (송신자 정책 프레임워크)
	- SRV (서비스 위치 표시)
	- TXT (텍스트 기록)
- Route 53은 어플리케이션, 웹 서버 등 리소스에 대한 성능을 모니터링하는 헬스체크 기능 제공
- Route 53이 지원하는 라우팅 정책
	- 가중치 라운드 로빈 : 동일한 기능을 수행하는 여러 리소스를 보유하고 있다면, Route 53을 이용해 리소스 별 트래픽을 분산시킬 수 있다. A/B 테스트에서 활용 가능
	- 지연 기반 라우팅 : 동일한 기능을 수행하는 다수의 EC2 기반 데이터 센터에 리소스를 확보하고 있다면, 특정 리소스에 대한 DNS 쿼리 요청 시 Route 53을 이용해 신속하게 응답 할 수 있는 방법
	- 장애 대응 라우팅 (Failover Routing) : 장애 대응을 통해 가용 리소스쪽으로 트래픽을 라우팅하고 싶다면, 장애 대응 라우팅 이용
	- 지역 DNS 라우팅 : 사용자의 지역에 따라 DNS 쿼리에 응답하도록 한다. 가장 가까운 엔드포인트로 트래픽 라우팅
