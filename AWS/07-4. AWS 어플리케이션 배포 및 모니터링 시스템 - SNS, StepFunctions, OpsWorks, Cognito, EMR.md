# 07-4. AWS 어플리케이션 배포 및 모니터링 시스템 - SNS, StepFunctions, OpsWorks, Cognito, EMR
## Amazon SNS (Simple Notification Service)
- 메시지 발행 배포-구독 방식 (publish - subscribe)
- Topic의 메시지 배포 순간 구독서비스에 메시지 수신
- Amazon SNS의 주요 기능
	- 다중 AZ 저장 -> 신뢰성 증가
	- HTTP/HTTPS, Lambda, SQS 등 다양한 프로토콜 지원
	- 즉각, 지역 전달. push 기반 전송을 통해 구독자에게 자동으로 메싲 ㅣ전송
	- SNS + Cloud Watch를 통합한 모니터링 기능을 통해 모든 토픽에 대한 성능지표 수집, 시각화, 배포 가능
	- AWS 관리 콘솔, CLI, SDK, Amazon SNS Query API, Window Power Shell 이용 접속 가능
- Amazon SNS 이용 단계
	- 토픽 생성 : SNS에서 토픽은 메시지를 전송하고 노티피케이션을 구독하기 위한 커뮤니케이션 채널이며, 배포자와 구독자의 연결점
	- 토픽 구독 : 토픽 메시지를 수신하려면 토픽의 엔드포인트에 구독 신청 필요하며, 승인이 이루어지면 해당 토픽으로 배포되는 모든 메시지를 엔드포인트를 이용하여 받아볼 수 있다.
	- 토픽 배포
- SQS와 SNS를 함께 사용하면 시너지 증가

## AWS StepFunctions
- 시각화된 워크플로를 통해 분산 어플리케이션 및 마이크로 서비스 컴포넌트의 고나리를 돕는 완전 관리형 서비스
- 7가지 상태 타입
	- Task (업무/임무) : 업무단위로 어플리케이션 컴포넌트 및 마이크로서비스 호출
		- 2가지 상태 - AWS Lambda함수에 호출 / 어플리케이션 임무 전달
	- Choice (선택) : 스테이트머신에 의해 결정로직 적용
	- Parallel (병렬) : 다수의 스테이트에 동일한 입력값 전달, 이미지처리 등에 사용
	- Wait (대기) 
	- Fail (실패)
	- Succeed (성공)
	- Pass (전달)

## AWS Elastic Beanstalk
- 웹 어플리케이션을 배포할 수 있는 가장 간단하고 신속한 방법
- 실행환경(Environment) 
	- EC2, RDS, ELB, AutoScaling
	- 하나의 실행환경을 확장성을 고려해 하나의 어플리케이션만 실행
- 어플리케이션 버전 : S3에 저장된 어플리케이션 실행코드
- 저장환경설정: 환경설정 및 리소스 동작 정의
- AWS Elastic Beanstalk는 서로 다른 유형의 웹 어플리케이션 지원을 위해 두 가지 실행환경 티어 제공
	- 웹서버는 HTTP 요청 수신 및 처리를 담당하는 표준 어플리케이션으로 주로 80번 포트 이용
	- 워커는 SQS 큐 메시지를 수신하기 위해 백그라운드에서 실행되는 특수한 어플리케이션으로 HTTP를 이용해 사용자의 어플리케이션에 메시지 전달
- 사용자는 Elastic Beanstalk 환경설정파일(JSON or YAML 포맷)을 어플리케이션 소스코드에 추가해 환경을 설정하고 AWS 리소스를 커스터마이징 가능

## AWS OpsWorks
- SW의 환경설정, 서버확장, 어플리케이션배포, DB설정 등 업무 관리
- OpsWorks가 제공하는 인스턴스 - Chef, Puppet
	- Chef Automate : Chef 서버이자 종합적인 자동화 도구
	- Puppet Enterprise : 오케스트레이션, 자동화 프로비저닝, 추적 데이터 시각화등 종합적인 워크플로 자동화 도구
	- OpsWorks Stacks : AWS와 온프레미스 환경의 어플리케이션 및 서버관리를 도움. 전체 어플리케이션을 다수의 레이어를 지닌 스택형식으로 모델링

## Amazon Cognito
- 다수의 모바일 디바이스에서 사용자 관리를 도와주는 신원증명 및 데이터 도익화 서비스
- 비인증 신원증명 방식지원 -> 로그인없이 앱 사용 뒤 퍼블릭 로그인 방식(구글, 페북)으로 프로필 생성 -> 데이터 마이그레이션
- 유저 풀
	- 유저 디렉터리로서 수천만명의 사용자로 확장 가능
	- 직접 가입한 유저 및 소셜 신원인증 제공자를 통해 로그인한 유저의 프로필 및 인증 토큰 제공
- 앱 사용 설정, 게임 플레이 상태 정보 등 유저 데이터 및 키 벨류 페어를 동기화하는데 사용
- 모바일 앱에서 AWS 리소스에 대한 접근 관리를 도우며 리소스 사용권한 롤 형태로 정의하고, 유저에게 롤을 할당해 유저별로 접근이 가능한 리소스에만 선별적으로 접근가능하게 할 수 있다.

## Amazon Elastic MapReduce (EMR)
- 다수의 EC2 인스턴스를 분산 컴퓨팅 환경으로 구성한 관리형 Hadoop(데이터처리) 프레임워크 제공
- EMR을 사용하려면 먼저 S3에 데이터 업로드 후 EMR 클러스터 런칭
- S3(데이터 입력) -> EMR(데이터 분석) -> S3(분석결과) -> 시각화 도구 이용
- Amazon EMR 클러스터의 노드
	- 마스터 노드 : 코어 노드와 태스크 노드의 잡 배분 조율
	- 코어 노드 : 마스터 노드가 할당한 태스크를 실행하는 역하을 맡고, 클러스터 내 HDFS(Hadoop Distributed File System)에 데이터 저장
	- 태스크 노드 : 태스크를 실행만 하고 저장하지는 않음. 클러스터를 위한 순수 연산 기능만 제공