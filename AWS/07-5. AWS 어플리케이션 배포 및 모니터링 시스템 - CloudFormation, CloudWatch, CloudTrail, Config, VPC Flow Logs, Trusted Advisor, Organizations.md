# 07-5. AWS 어플리케이션 배포 및 모니터링 시스템 - CloudFormation, CloudWatch, CloudTrail, Config, VPC Flow Logs, Trusted Advisor, Organizations
## AWS Cloud Formation
- 작성한 아키텍처 모델에 따라 AWS 리소스 스택의 프로비전 및 관리를 돕는다.
- 사용
	- 템플릿 생성 : JSON or YAML 파일로 인프라와 어플리케이션 스택을 구성하는 설계도인 템플릿을 생성한다.
	- 템플릿 업로드 : Cloud Formation에 템플릿 업로드
- 스택 : AWS 리소스의 모임

## Amazon Cloud Watch
- AWS 클라우드에 배포된 모든 리소스를 모니터링하기 위한 서비스
- 헬스체크, 활성화 수준 검토, 성능 확인
- 주요 기능
	- 성능 지표 수집 및 추적
	- Amazon Cloud Watch Events를 이용한 실시간 모니터링
	- 모니터링 및 Logs 저장
	- 알람 설정
	- 그래프와 통계 정보 시각화 (대시보드)

## AWS Cloud Trail
- 콘솔, CLI 등 도구를 통해 전달된 모든 API 호출 로그를 관리하는 서비스
- 관리자는 Cloud Trail을 이용해 AWS 리소스의 변경 추적, 규정 준수 여부 파악 등 다양한 업무 처리 가능
- 히스토리는 리전에서 90일간 보존되며, 하나의 리전당 다섯개의 트레일 생성 가능
- 활용 방식
	- 모든 리전의 API 호출 로그 기록
	- 로그파일 생성시, 해싱에 SHA-256 적용 또는 디지털 서명에 RSA 및 SHA-256  적용
	- 기본적으로 Cloud Trail에서 버킷으로 전송 (SSE - S3)
	- 사용자가 보안 레이어 추가 (KMS 관리형키로 암호화)
	- 실시간으로 Cloud Trail 로그를 생성하도록 설정 -> Cloud Watch 로그로 전달

## AWS Config
- 사용자 계정에 포함된 AWS 리소스와 현재 환경 설정에 대한 세부적인 목록 제공
- 환경설정 규칙을 통해 규정 위반 간으성 및 위험 상황 미리 평가 가능
- AWS Config 작동 방식
	- AWS 리소스 환경설정 변경 -> 변경사항 기록 및 정규화 -> 정규화된 변경사항 S3 저장 or Config는 자동으로 이상적인 환경설정 규칙과 환경설정 사항 평가 (Dashboard, SNS)
- AWS Config를 이용한 작업
	- 지속적인 모니터링
	- 지속적 평가 : 리소스에 대한 프로비전 및 환경설정 규칙 정의로 변경된 환경 설정 내역이 기업의 정책에 부합하는지 평가가능
	- 변화 관리 : 변화 관리 업무 지원, 히스토리 내역 지원
	- 운영상의 문제 해결 : 지속적이 모니터링으로 운영상의 문제 해결 가능
	- 규정 준수 모니터링

## Amazon VPC Flow Logs
- VPC 네트워크 인터페이스의 IP 트래픽 정보를 수집한 뒤 Amazon Cloud Watch Logs를 이용해 로그 데이터를 저장하며, Elastic Search 또는 Kibana등의 서비스와 통합해 로그 데이터를 시각화 하거나 인스턴스에 특정 트래픽이 도달하지 못하는 문제를 해결할 수 있다.
- 시큐리티 그룹과 네트워크 ACL 규칙에 따라 승인된 트래픽, 거부 트래픽 정보를 모두 수집한다.
- VPC, Subnet, Network Interface 레벨에서 활성화 가능하다.

## AWS Trusted Advisor
- 주요 기능
	- 비용 최적화 : 낭비되는 리소스 제거 및 예약 용량으로 전환하여 비용 절약
	- 보안성 : 리소스 간의 커뮤니케이션 상태 확인. 다양한 보안 기능 활성화로 리소스 성능점검등을 통해 어플리케이션 보안성 증대
	- 장애 대응성 : AutoScaling, 헬스체크, 다중 AZ, 백업 기능으로 어플리케이션의 가용성 및 중복 구현성 증대 가능
	- 성능 : 서비스 용량제한 확인. 프로비저닝된 처리성능 요소의 활용. 활성화된 인스턴스 모니터링 등을 통해 어플리케이션 성능 증대 가능
	- 서비스 용량 제한 관리 : 서비스 용량 제한선의 80% 초과 여부 확인
		- 초과 여부는 스냅샨을 기준으로 관리하며 실제 사용량과 다소 차이가 있을 수 있다.
	- 대시보드에 표시되는 정보의 색상
		- 빨간색  - 대응 동작 필요
		- 노란색 - 상태확인
		- 녹색 - 이상무

## AWS Organizations
- 다수의 AWS 계정을 생성, 관리 및 간소화
- 다수의 AWS 계정에 정책 기반 관리 기법 적용 가능