# iOS애니메이션 - UIViewPropertyAnimator

- 애니메이션 자체가 외부(사용자 행동)와 상호작용하게 구현하도록 만든 애니메이션 기법
- 사용자의 입력과 상호작용하는 애니메이션이 필요한 경우
  - 애니메이션 진행 도중 추가적인 사용자의 입력으로 애니메이션 종료 지점이 변경되는경우(A지점으로 이동 중 추가 클릭으로 B로 목적지 변경)
  - 애니메이션 진행 도중 동작을 취소해 원상태로 복귀하는 경우
  - 애니메이션의 일시 정지와 재개
  - 애니메이션 진행 상태를 사용자 입력에 맞추어 앞으로 빠르게 감거나 되감기하여 다른 진행률로 이동하는 경우(슬라이더를 앞으로밀면 빠르게, 뒤로 밀면 느리게)
- 다른 애니메이션에서 상호작용하는 애니메이션 구현이 어려운 이유
  - 다른 애니메이션 구현 방법에서는 매 프레임의 상태가 실제적 값이어야 함
  - 기존 API에서 매 프레임 상태는 시스템 프레임워크 내부에서 상태가 제어됨
  - 개발자에게는 시작값과 종료값 밖에 제공되지 않음
- UIViewPropertyAnimator클래스: 지속시간과 타이밍 곡선 그리고 애니메이션의 내용을 담은 클로저를 기반으로 생성

```swift
let animator = UIViewPropertyAnimator(duration: 2.0, curve: .easeInOut){
    circleView.center = CGPoint(x: 100, y: 80)
}
animator.startAnimations()
//이후 animator를 이용하여 여러 상호작용이 가능함
```

- 장점

  - 자동으로 진행될 필요가 없는 상황을 상정할 수 있음

    - 뷰의 색상이 파랑에서 노랑으로 변경하는 애니메이션을 만들고 일시정지 상태로 시작

    - 뷰를 끌고 다닐 때 위치에 따라 애니메이션의 진행률이 그에 따라 변하게 만들면, 위치에 따라 색이 자연스럽게 변하는 효과를 만들 수 있음
