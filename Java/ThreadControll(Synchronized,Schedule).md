# Thread Controll

- 우선순위를 이용한 쓰레드는 한계가 있음 => 정교한 스케줄링방법 처리 필요

## Synchronization(동기화)

- 멀티쓰레드에서 특정 작업을 마치기 전까지 다른 쓰레드의 방해를 받지 않도록 '임계영역(critical section)' 과 '잠금(lock)'이 도입됨
- 공유 데이터를 사용하는 코드 영역을 임계여역으로 지정해놓고, 공유데이터(객체)가 가지고 있는 lock을 획득한 단 하나의 쓰레드만 이 영역 내의 코드를 수행할 수 있게 한다.
- synchronized블럭을 이용해 쓰레드 동기화 진행. JDK1.5부터는 'java.util.concurrent.locks'와 'java.util.concurrent.atomic'패키지로 다양한 동기화 구현 지원

```java
//1.메서드 전체를 임계영역으로 지정
public synchronized void clacSum(){}

//2.특정한 영역을 임계영역으로 지정
synchronized(객체의 참조변수){}

* 전체영역을 임계영역으로 지정하는 것보다 특정영역을 지정하는 것이 효율적인 프로그램을 만들 수 있다.
```



## Scheduling(스케줄링)

- 관련 메서드

  | 메서드                         | 설명                                                         |
  | ------------------------------ | ------------------------------------------------------------ |
  | Static void sleep(long millis) | 지정된 시간(천분의 일초 단위) 동안 쓰레드를 일시정지시킨다. 지정한 시간이 지나고 나면, 자동으로 다시 실행대기상태가 된다. |
  | void jon()                     | 지정된 시간동안 쓰레드가 실행되도록한다. 지정된 시간이 지나거나 작업이 종료되면 join()을 호출한 쓰레드로 다시 돌아와 실행을 계속한다. |
  | void interrupt()               | sleep()이나 join()에 의해 일시정지상태인 쓰레드를 깨워서 실행대기상태로 만든다. 해당 쓰레드에서는 interruptedException이 발생함으로써 일시정지상태를 벗어나게 된다. |
  | void stop()                    | 쓰레드를 즉시 종료시킨다.                                    |
  | void suspend()                 | 쓰레드를 일시정지시킨다. resume()을 호출하면 다시 실행대기상태가 된다. |
  | void resume()                  | suspend()에 의해 일시정지상태에 있는 쓰레드를 실행대기상태로 만든다. |
  | static void yield()            | 실행 중에 자신에게 주어진 실행시간을 다른 쓰레드에게 양보(yield)하고 자신은 실행대기 상태가 된다. |

- 상태

  | 상태                 | 설명                                                        |
  | -------------------- | ----------------------------------------------------------- |
  | NEW                  | 쓰레드가 생성되고 아직 start()가 호출되지 않은 상태         |
  | RUNNABLE             | 실행 중 또는 실행 가능한 상태                               |
  | BLOCKED              | 동기화블럭에 의해 일시정지된 상태                           |
  | WATING, TIMED_WATING | 쓰레드의 작업이 종료되지는 않았지만, 실행가능하지 않은 상태 |
  | TERMINATED           | 쓰레드의 작업이 종료된 상태                                 |

  